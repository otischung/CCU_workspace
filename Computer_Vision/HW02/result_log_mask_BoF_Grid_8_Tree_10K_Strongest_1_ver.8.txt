bag = bagOfFeatures(trainSet, ...
    "GridStep", [8, 8], ...
    "TreeProperties", [1, 10000], ...
    "StrongestFeatures", 1, ...
    "Verbose", true, ...
    "UseParallel", true);

Creating Bag-Of-Features.
-------------------------
* Image category 1: Black-grass
* Image category 2: Charlock
* Image category 3: Cleavers
* Image category 4: Common Chickweed
* Image category 5: Common wheat
* Image category 6: Fat Hen
* Image category 7: Loose Silky-bent
* Image category 8: Maize
* Image category 9: Scentless Mayweed
* Image category 10: Shepherds Purse
* Image category 11: Small-flowered Cranesbill
* Image category 12: Sugar beet
* Selecting feature point locations using the Grid method.
* Extracting SURF features from the selected feature point locations.
** The GridStep is [8 8] and the BlockWidth is [32 64 96 128].

* Extracting features from 4276 images...done. Extracted 44487504 features.

* Keeping 100 percent of the strongest features from each category.

* Balancing the number of features across all image categories to improve clustering.
** Image category 5 has the least number of strongest features: 2070396.
** Using the strongest 2070396 features from each of the other image categories.

* Creating a 10000 word visual vocabulary.
* Number of levels: 1
* Branching factor: 10000
* Number of clustering steps: 1

* [Step 1/1] Clustering vocabulary level 1.
* Number of features          : 24844752
* Number of clusters          : 10000
* Initializing cluster centers...100.00%.
* Clustering...completed 26/100 iterations (~94.56 seconds/iteration)...converged in 26 iterations.

* Finished creating Bag-Of-Features


Training an image category classifier for 12 categories.
--------------------------------------------------------
* Category 1: Black-grass
* Category 2: Charlock
* Category 3: Cleavers
* Category 4: Common Chickweed
* Category 5: Common wheat
* Category 6: Fat Hen
* Category 7: Loose Silky-bent
* Category 8: Maize
* Category 9: Scentless Mayweed
* Category 10: Shepherds Purse
* Category 11: Small-flowered Cranesbill
* Category 12: Sugar beet

* Encoding features for 4276 images...done.

* Finished training the category classifier. Use evaluate to test the classifier on a test set.


Evaluating image category classifier for 12 categories.
-------------------------------------------------------

* Category 1: Black-grass
* Category 2: Charlock
* Category 3: Cleavers
* Category 4: Common Chickweed
* Category 5: Common wheat
* Category 6: Fat Hen
* Category 7: Loose Silky-bent
* Category 8: Maize
* Category 9: Scentless Mayweed
* Category 10: Shepherds Purse
* Category 11: Small-flowered Cranesbill
* Category 12: Sugar beet

* Evaluating 4276 images...done.

* Finished evaluating all the test sets.

* The confusion matrix for this test set is:


                                                                                                                       PREDICTED
KNOWN                        | Black-grass   Charlock   Cleavers   Common Chickweed   Common wheat   Fat Hen   Loose Silky-bent   Maize   Scentless Mayweed   Shepherds Purse   Small-flowered Cranesbill   Sugar beet   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Black-grass                  | 0.77          0.00       0.00       0.00               0.06           0.00      0.11               0.02    0.00                0.00              0.02                        0.02         
Charlock                     | 0.00          0.96       0.00       0.00               0.01           0.00      0.00               0.02    0.00                0.00              0.01                        0.00         
Cleavers                     | 0.00          0.03       0.69       0.00               0.00           0.00      0.00               0.03    0.00                0.00              0.24                        0.00         
Common Chickweed             | 0.00          0.02       0.01       0.78               0.01           0.01      0.00               0.04    0.07                0.03              0.03                        0.01         
Common wheat                 | 0.05          0.01       0.00       0.00               0.82           0.00      0.04               0.06    0.00                0.00              0.02                        0.01         
Fat Hen                      | 0.00          0.04       0.02       0.01               0.02           0.77      0.00               0.06    0.00                0.00              0.03                        0.04         
Loose Silky-bent             | 0.29          0.00       0.00       0.00               0.05           0.00      0.58               0.04    0.01                0.00              0.03                        0.01         
Maize                        | 0.00          0.00       0.01       0.00               0.01           0.00      0.00               0.97    0.02                0.00              0.00                        0.00         
Scentless Mayweed            | 0.00          0.02       0.01       0.04               0.01           0.01      0.00               0.05    0.83                0.03              0.01                        0.00         
Shepherds Purse              | 0.00          0.02       0.00       0.03               0.00           0.00      0.00               0.00    0.01                0.84              0.09                        0.00         
Small-flowered Cranesbill    | 0.00          0.01       0.01       0.00               0.00           0.00      0.00               0.00    0.00                0.02              0.96                        0.00         
Sugar beet                   | 0.00          0.00       0.00       0.01               0.03           0.04      0.00               0.06    0.01                0.00              0.00                        0.84         

* Average Accuracy is 0.82.


Evaluating image category classifier for 12 categories.
-------------------------------------------------------

* Category 1: Black-grass
* Category 2: Charlock
* Category 3: Cleavers
* Category 4: Common Chickweed
* Category 5: Common wheat
* Category 6: Fat Hen
* Category 7: Loose Silky-bent
* Category 8: Maize
* Category 9: Scentless Mayweed
* Category 10: Shepherds Purse
* Category 11: Small-flowered Cranesbill
* Category 12: Sugar beet

* Evaluating 474 images...done.

* Finished evaluating all the test sets.

* The confusion matrix for this test set is:


                                                                                                                       PREDICTED
KNOWN                        | Black-grass   Charlock   Cleavers   Common Chickweed   Common wheat   Fat Hen   Loose Silky-bent   Maize   Scentless Mayweed   Shepherds Purse   Small-flowered Cranesbill   Sugar beet   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Black-grass                  | 0.50          0.00       0.00       0.00               0.27           0.04      0.08               0.00    0.00                0.00              0.12                        0.00         
Charlock                     | 0.00          0.92       0.00       0.00               0.03           0.00      0.00               0.03    0.00                0.00              0.03                        0.00         
Cleavers                     | 0.00          0.03       0.48       0.00               0.00           0.00      0.00               0.07    0.00                0.00              0.41                        0.00         
Common Chickweed             | 0.00          0.00       0.02       0.70               0.00           0.02      0.00               0.02    0.15                0.03              0.07                        0.00         
Common wheat                 | 0.05          0.05       0.00       0.00               0.64           0.00      0.14               0.00    0.05                0.00              0.05                        0.05         
Fat Hen                      | 0.06          0.04       0.02       0.02               0.00           0.53      0.00               0.11    0.00                0.00              0.04                        0.17         
Loose Silky-bent             | 0.42          0.00       0.00       0.00               0.06           0.00      0.42               0.03    0.03                0.00              0.03                        0.02         
Maize                        | 0.00          0.00       0.00       0.00               0.00           0.00      0.00               0.86    0.09                0.00              0.00                        0.05         
Scentless Mayweed            | 0.00          0.02       0.02       0.02               0.06           0.00      0.00               0.10    0.73                0.06              0.00                        0.00         
Shepherds Purse              | 0.00          0.09       0.04       0.04               0.00           0.00      0.00               0.04    0.04                0.61              0.13                        0.00         
Small-flowered Cranesbill    | 0.00          0.02       0.00       0.00               0.00           0.00      0.00               0.00    0.02                0.02              0.94                        0.00         
Sugar beet                   | 0.00          0.03       0.03       0.05               0.05           0.03      0.00               0.11    0.00                0.00              0.00                        0.71         

* Average Accuracy is 0.67.
